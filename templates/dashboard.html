{% extends "base.html" %}
{% block content %}
<h2>Moje z치znamy</h2>
<form action="/add_record" method="POST">
  <label>D치tum:</label><input type="date" name="date" required>
  <label>Projekt:</label>
  <select name="project_id" required>
    {% for p in projects %}
    <option value="{{ p.id }}">{{ p.name }} ({{ p.unit_type }})</option>
    {% endfor %}
  </select>
  <label>Hodnota:</label><input type="number" step="0.1" name="amount" required>
  <label>Pozn치mka:</label><input type="text" name="note">
  <button type="submit">Prida콘</button>
</form>

<a class="pdf-btn" href="/export/pdf">游늯 Export PDF</a>

<table>
  <tr><th>D치tum</th><th>Projekt</th><th>Mno쬽tvo</th><th>Pozn치mka</th><th>Upravi콘</th></tr>
  {% for r in records %}
  <tr>
    <td>{{ r.date }}</td>
    <td>{{ r.project.name if r.project else '' }}</td>
    <td>{{ r.amount }}</td>
    <td>{{ r.note }}</td>
    <td><button onclick="openEditModal({{ r.id }}, {{ r.project_id }}, {{ r.amount }}, '{{ r.note }}')">九勇</button></td>
  </tr>
  {% endfor %}
</table>

<div id="editModal" class="modal">
  <form id="editForm" method="POST">
    <h3>Upravi콘 z치znam</h3>
    <label>Projekt:</label>
    <select name="project_id">
      {% for p in projects %}
      <option value="{{ p.id }}">{{ p.name }}</option>
      {% endfor %}
    </select>
    <label>Mno쬽tvo:</label><input name="amount" type="number" step="0.1">
    <label>Pozn치mka:</label><input name="note" type="text">
    <button type="submit">Ulo쬴콘</button>
  </form>
</div>
{% endblock %}
